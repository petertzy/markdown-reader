
            <html>
            <head>
                <meta charset="UTF-8">
                <style>
                    body {
                        background-color: white;
                        color: black;
                        font-family: sans-serif;
                        padding: 20px;
                        font-size: 32px;
                        line-height: 1.6;
                    }
                    pre, code {
                        font-size: 28px;
                        white-space: pre-wrap;
                    }
                    table {
                        border-collapse: collapse;
                        width: 100%;
                        margin-top: 20px;
                    }
                    th, td {
                        text-align: left;
                        border: 1px solid #ccc;
                        padding: 12px 16px;
                        vertical-align: top;
                    }
                    th {
                        background-color: #f3f3f3;
                        color: #333;
                    }
                    tr:nth-child(even) {
                        background-color: #fafafa;
                    }
                </style>
            </head>
            <body>
                <p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªä½¿ç”¨ <strong>Livewire</strong> ç¼–å†™çš„ Laravel ç»„ä»¶ï¼Œæ–‡ä»¶å±äº <code>App\Http\Livewire\RegistrationEmail</code> ç±»ã€‚å®ƒä¸»è¦ç”¨äºåœ¨ç”¨æˆ·æ³¨å†Œè¿‡ç¨‹ä¸­éªŒè¯ç”µå­é‚®ç®±æ˜¯å¦ï¼š</p>

<ol>
<li>æ ¼å¼åˆæ³•</li>
<li>åœ¨æ•°æ®åº“ä¸­å”¯ä¸€</li>
<li>é€šè¿‡å¤–éƒ¨ API éªŒè¯ä¸ºâ€œæœ‰æ•ˆé‚®ç®±â€</li>
</ol>

<p>ä¸‹é¢æˆ‘ä¼šæŒ‰é¡ºåºè¯¦ç»†é€è¡Œè§£é‡Šä»£ç çš„ä½œç”¨ï¼š</p>

<hr />

<h2>ğŸ”° æ–‡ä»¶å¼€å¤´ &amp; å¼•å…¥ä¾èµ–</h2>

<div class="codehilite">
<pre><span></span><code><span class="x">namespace App\Http\Livewire;</span>

<span class="x">use Illuminate\Validation\Validator;</span>
<span class="x">use Illuminate\Support\Facades\Http;</span>
<span class="x">use Illuminate\Http\Request;</span>
<span class="x">use Livewire\Component;</span>
</code></pre>
</div>

<ul>
<li>å®šä¹‰å‘½åç©ºé—´ä¸º <code>App\Http\Livewire</code>ï¼Œè¿™æ˜¯ Livewire ç»„ä»¶çš„æ ‡å‡†ä½ç½®ã€‚</li>
<li><p>å¼•å…¥ï¼š</p>

<ul>
<li><code>Validator</code>: Laravel çš„éªŒè¯å™¨ç±»ã€‚</li>
<li><code>Http</code>: ç”¨äºå‘èµ· HTTP è¯·æ±‚ï¼ˆä¾‹å¦‚è°ƒç”¨å¤–éƒ¨é‚®ç®±éªŒè¯ APIï¼‰ã€‚</li>
<li><code>Request</code>: å¤„ç† HTTP è¯·æ±‚ã€‚</li>
<li><code>Component</code>: æ‰€æœ‰ Livewire ç»„ä»¶çš„çˆ¶ç±»ã€‚</li>
</ul></li>
</ul>

<hr />

<h2>ğŸ“¦ ç±»å®šä¹‰ï¼š<code>RegistrationEmail</code></h2>

<div class="codehilite">
<pre><span></span><code><span class="x">class RegistrationEmail extends Component</span>
</code></pre>
</div>

<p>è¿™æ˜¯ä¸€ä¸ª <strong>Livewire ç»„ä»¶ç±»</strong>ï¼Œä¼šå’Œå‰ç«¯ HTML ç»‘å®šäº¤äº’ã€‚</p>

<hr />

<h2>ğŸ”§ å…¬å…±å±æ€§</h2>

<div class="codehilite">
<pre><span></span><code><span class="x">public $email;</span>
<span class="x">public $api_email_check = null;</span>
</code></pre>
</div>

<ul>
<li><code>$email</code>: å­˜å‚¨ç”¨æˆ·è¾“å…¥çš„ç”µå­é‚®ä»¶åœ°å€ã€‚</li>
<li><code>$api_email_check</code>: å¤–éƒ¨ API éªŒè¯çš„ç»“æœï¼ˆç”¨æ¥åˆ¤æ–­é‚®ç®±æ˜¯å¦â€œæœ‰æ•ˆâ€ï¼‰ï¼Œåˆå§‹ä¸º <code>null</code>ã€‚</li>
</ul>

<hr />

<h2>âœ… éªŒè¯è§„åˆ™å®šä¹‰</h2>

<div class="codehilite">
<pre><span></span><code><span class="x">protected $rules = [</span>
<span class="x">    &#39;email&#39; =&gt; &#39;required | email | unique:users&#39;,</span>
<span class="x">];</span>
</code></pre>
</div>

<p>Livewire ä¼šæ ¹æ®è¿™äº›è§„åˆ™è‡ªåŠ¨è¿›è¡ŒéªŒè¯ã€‚</p>

<ul>
<li><code>required</code>: é‚®ç®±ä¸èƒ½ä¸ºç©ºã€‚</li>
<li><code>email</code>: é‚®ç®±æ ¼å¼å¿…é¡»æ­£ç¡®ã€‚</li>
<li><code>unique:users</code>: é‚®ç®±åœ¨ <code>users</code> è¡¨ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼ˆæ²¡æœ‰è¢«æ³¨å†Œï¼‰ã€‚</li>
</ul>

<hr />

<h2>ğŸ§¾ è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯</h2>

<div class="codehilite">
<pre><span></span><code><span class="x">protected $messages = [</span>
<span class="x">    &#39;email.unique:users&#39; =&gt; &#39;The Email Address is not unique.&#39;,</span>
<span class="x">    &#39;api_email_check.required&#39; =&gt; &#39;Die E-Mail Adresse ist ungÃ¼ltig.&#39;,</span>
<span class="x">];</span>
</code></pre>
</div>

<p>è‡ªå®šä¹‰éªŒè¯å¤±è´¥æ—¶çš„æç¤ºæ–‡å­—ï¼š</p>

<ul>
<li>é‚®ç®±å·²å­˜åœ¨æ—¶ï¼Œæç¤ºä¸ºè‹±æ–‡ã€‚</li>
<li><code>api_email_check</code> éªŒè¯å¤±è´¥ï¼ˆå³å¤–éƒ¨ API åˆ¤å®šé‚®ç®±æ— æ•ˆï¼‰ï¼Œæç¤ºä¸ºå¾·æ–‡ï¼šâ€œè¯¥ç”µå­é‚®ä»¶åœ°å€æ— æ•ˆâ€ã€‚</li>
</ul>

<hr />

<h2>ğŸ” æ–¹æ³•ï¼š<code>checkEmail(Request $request)</code></h2>

<p>ä¸»è¦åŠŸèƒ½æ˜¯ <strong>éªŒè¯é‚®ç®± + è°ƒç”¨ API éªŒè¯é‚®ç®±æœ‰æ•ˆæ€§</strong></p>

<div class="codehilite">
<pre><span></span><code><span class="x">public function checkEmail(Request $request)</span>
</code></pre>
</div>

<h3>æ­¥éª¤ 1ï¸âƒ£ï¼šæœ¬åœ°æ ¼å¼ + å”¯ä¸€éªŒè¯</h3>

<div class="codehilite">
<pre><span></span><code><span class="x">$this-&gt;validate();</span>
</code></pre>
</div>

<ul>
<li>åŸºäºä¸Šé¢çš„ <code>$rules</code> è‡ªåŠ¨éªŒè¯ <code>email</code> å­—æ®µã€‚</li>
<li>Livewire ä¼šåœ¨æ¯æ¬¡æ•°æ®å˜åŠ¨æ—¶é¢‘ç¹è§¦å‘è¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤è¿™é‡Œåªåˆæ­¥éªŒè¯æ ¼å¼å’Œå”¯ä¸€æ€§ï¼Œé¿å…ä¸å¿…è¦çš„ API è°ƒç”¨ã€‚</li>
</ul>

<hr />

<h3>æ­¥éª¤ 2ï¸âƒ£ï¼šè°ƒç”¨å¤–éƒ¨ API éªŒè¯é‚®ç®±æœ‰æ•ˆæ€§</h3>

<div class="codehilite">
<pre><span></span><code><span class="x">$email_check = Http::get(&#39;https://t1.epochtimes.de/fwd/mail/v1/verify?purpose=bulk&amp;email=&#39;. urlencode($this-&gt;email))-&gt;json();</span>
</code></pre>
</div>

<ul>
<li>ä½¿ç”¨ Laravel çš„ <code>Http</code> å®¢æˆ·ç«¯ï¼Œå‘å¤–éƒ¨æœåŠ¡å‘é€ GET è¯·æ±‚ã€‚</li>
<li><p>å‚æ•°ï¼š</p>

<ul>
<li><code>purpose=bulk</code>ï¼šè¯·æ±‚ç”¨é€”ï¼ˆå¯èƒ½å½±å“æœåŠ¡å™¨ç¼“å­˜æˆ–è¿”å›æ•°æ®ï¼‰ã€‚</li>
<li><code>email=xxx@example.com</code>ï¼šä¼ å…¥ç”¨æˆ·çš„é‚®ç®±ã€‚</li>
</ul></li>
<li><code>.json()</code> ä¼šå°†è¿”å›å€¼ï¼ˆJSON æ ¼å¼ï¼‰è½¬ä¸º PHP æ•°ç»„ã€‚</li>
</ul>

<h3>æ­¥éª¤ 3ï¸âƒ£ï¼šæ ¹æ®è¿”å›å€¼æ›´æ–°å˜é‡</h3>

<div class="codehilite">
<pre><span></span><code><span class="x">$this-&gt;api_email_check = $email_check[&#39;valid&#39;] ? &quot;true&quot; : null;</span>
</code></pre>
</div>

<ul>
<li>å¦‚æœ API è¿”å›ç»“æœä¸­ <code>valid</code> ä¸º <code>true</code>ï¼Œè¯´æ˜é‚®ç®±æœ‰æ•ˆï¼Œè®¾ç½®ä¸º <code>"true"</code>ã€‚</li>
<li>å¦åˆ™è®¾ä¸º <code>null</code>ï¼Œä½¿ä¸‹æ–¹éªŒè¯å¤±è´¥ã€‚</li>
</ul>

<hr />

<h3>æ­¥éª¤ 4ï¸âƒ£ï¼šå¼ºåˆ¶éªŒè¯ API æ£€æŸ¥å­—æ®µ</h3>

<div class="codehilite">
<pre><span></span><code><span class="x">$this-&gt;validate([&#39;api_email_check&#39; =&gt; &#39;required&#39;]);</span>
</code></pre>
</div>

<ul>
<li>è¿™ä¸ªéªŒè¯è§„åˆ™ç¡®ä¿ <code>api_email_check</code> ä¸ä¸ºç©ºã€‚</li>
<li>è‹¥ <code>null</code>ï¼Œåˆ™éªŒè¯å¤±è´¥ï¼ˆè¯´æ˜é‚®ç®±ä¸é€šè¿‡å¤–éƒ¨éªŒè¯ï¼‰ã€‚</li>
</ul>

<hr />

<h3>å¯é€‰é€»è¾‘ï¼ˆå½“å‰æ— æ•ˆï¼‰</h3>

<div class="codehilite">
<pre><span></span><code><span class="x">if(isset($validator) &amp;&amp; $validator-&gt;fails()) {</span>
<span class="x">    return Redirect::back()-&gt;withErrors($validator);</span>
<span class="x">}</span>
</code></pre>
</div>

<ul>
<li>è¿™æ®µå…¶å®æ²¡ç”¨ï¼Œå› ä¸º <code>$validator</code> å˜é‡å¹¶æœªå®šä¹‰ã€‚</li>
<li>ä¹Ÿè®¸æ˜¯æ—§é€»è¾‘æ®‹ç•™ã€‚</li>
</ul>

<hr />

<h2>âª <code>mount()</code> æ–¹æ³• â€” åˆå§‹åŒ–</h2>

<div class="codehilite">
<pre><span></span><code><span class="x">public function mount()</span>
<span class="x">{</span>
<span class="x">    $this-&gt;email = (session(&#39;arr_checkout_details&#39;))[&#39;email&#39;];</span>
<span class="x">}</span>
</code></pre>
</div>

<ul>
<li>Livewire ç”Ÿå‘½å‘¨æœŸé’©å­ï¼šç»„ä»¶åŠ è½½æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚</li>
<li>ä»ä¼šè¯ï¼ˆ<code>session</code>ï¼‰ä¸­å–å‡º <code>arr_checkout_details['email']</code>ï¼Œå¹¶èµ‹å€¼ç»™ <code>$email</code>ã€‚</li>
<li>è¯´æ˜æ­¤ç»„ä»¶ç”¨äºæŸä¸ªâ€œæ³¨å†Œæˆ–ç»“è´¦æµç¨‹â€ä¸­ã€‚</li>
</ul>

<hr />

<h2>ğŸ¨ <code>render()</code> æ–¹æ³• â€” æ¸²æŸ“ç»„ä»¶è§†å›¾</h2>

<div class="codehilite">
<pre><span></span><code><span class="x">public function render()</span>
<span class="x">{</span>
<span class="x">    return view(&#39;livewire.registration-email&#39;);</span>
<span class="x">}</span>
</code></pre>
</div>

<ul>
<li>è¿”å› Blade è§†å›¾æ–‡ä»¶ <code>resources/views/livewire/registration-email.blade.php</code>ã€‚</li>
<li>æ‰€æœ‰ Livewire ç»„ä»¶éƒ½éœ€è¿”å›è§†å›¾ã€‚</li>
</ul>

<hr />

<h2>ğŸ“Œ æ€»ç»“åŠŸèƒ½æµç¨‹å›¾</h2>

<pre><code>ç”¨æˆ·è¾“å…¥é‚®ç®± âœ è§¦å‘ checkEmail()
    â¬‡
æœ¬åœ°éªŒè¯æ ¼å¼/å”¯ä¸€æ€§ï¼ˆLaravelï¼‰
    â¬‡
è°ƒç”¨å¤–éƒ¨ API éªŒè¯é‚®ç®±æœ‰æ•ˆæ€§
    â¬‡
å¦‚æœå¤±è´¥ï¼šæ˜¾ç¤ºå¾·æ–‡é”™è¯¯
    â¬‡
éªŒè¯æˆåŠŸï¼šå…è®¸ç»§ç»­æ³¨å†Œ
</code></pre>

<hr />

<h2>âœ… æŠ€æœ¯ç‚¹æ€»ç»“</h2>

<table>
<thead>
<tr>
  <th>æŠ€æœ¯</th>
  <th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Livewire</td>
  <td>åˆ›å»ºå“åº”å¼ç»„ä»¶ï¼Œæ— éœ€æ‰‹å†™å¤§é‡ JavaScript</td>
</tr>
<tr>
  <td><code>Http::get()</code></td>
  <td>å‘å¤–éƒ¨ API è¯·æ±‚é‚®ç®±éªŒè¯</td>
</tr>
<tr>
  <td><code>$this-&gt;validate()</code></td>
  <td>è‡ªåŠ¨è§¦å‘ Laravel çš„éªŒè¯é€»è¾‘</td>
</tr>
<tr>
  <td><code>mount()</code></td>
  <td>Livewire ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œç”¨äºåˆå§‹åŒ–ç»„ä»¶æ•°æ®</td>
</tr>
<tr>
  <td><code>render()</code></td>
  <td>è¿”å›ç»„ä»¶è§†å›¾</td>
</tr>
<tr>
  <td><code>session()</code></td>
  <td>è·å–å­˜å‚¨åœ¨ä¼šè¯ä¸­çš„ç”¨æˆ·è¾“å…¥</td>
</tr>
</tbody>
</table>

<hr />

<p>å¦‚æœä½ è¿˜æƒ³æˆ‘è§£é‡Šå‰ç«¯ Blade æ–‡ä»¶æ˜¯æ€ä¹ˆè·Ÿè¿™ä¸ªç»„ä»¶äº¤äº’çš„ï¼ˆæ¯”å¦‚è¡¨å•ã€æŒ‰é’®æ€ä¹ˆè§¦å‘è¿™ä¸ª checkEmailï¼‰ï¼Œæˆ‘ä¹Ÿå¯ä»¥ç»§ç»­è®²è§£ã€‚</p>

            </body>
            </html>
            