
            <html>
            <head>
                <meta charset="UTF-8">
                <style>
                    body {
                        background-color: white;
                        color: black;
                        font-family: sans-serif;
                        padding: 20px;
                        font-size: 32px;
                        line-height: 1.6;
                    }
                    pre, code {
                        font-size: 28px;
                        white-space: pre-wrap;
                    }
                    table {
                        border-collapse: collapse;
                        width: 100%;
                        margin-top: 20px;
                    }
                    th, td {
                        text-align: left;
                        border: 1px solid #ccc;
                        padding: 12px 16px;
                        vertical-align: top;
                    }
                    th {
                        background-color: #f3f3f3;
                        color: #333;
                    }
                    tr:nth-child(even) {
                        background-color: #fafafa;
                    }
                </style>
            </head>
            <body><p>å½“ç„¶å¯ä»¥ï¼Œä¸‹é¢æ˜¯å¯¹ä½ æä¾›çš„ PHP / Laravel ä»£ç çš„<strong>ä¸­æ–‡é€è¡Œè¯¦ç»†è§£é‡Š</strong>ã€‚</p>

<p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ª <code>Controller</code> åŸºç±»ï¼Œæ˜¯<strong>æ‰€æœ‰æ§åˆ¶å™¨çš„çˆ¶ç±»</strong>ï¼Œç”¨äºç»Ÿä¸€æä¾›ä¸€äº›å¸¸ç”¨åŠŸèƒ½ã€‚</p>

<hr />

<h3>âœ… ä»£ç éƒ¨åˆ†</h3>

<div class="codehilite">
<pre><span></span><code><span class="cp">&lt;?php</span>
</code></pre>
</div>

<p>è¿™æ˜¯ PHP æ–‡ä»¶çš„èµ·å§‹æ ‡è®°ã€‚</p>

<hr />

<div class="codehilite">
<pre><span></span><code><span class="x">namespace App\Http\Controllers;</span>
</code></pre>
</div>

<p>è¿™æ˜¯<strong>å‘½åç©ºé—´å£°æ˜</strong>ï¼Œè¯´æ˜è¯¥ç±»å±äº <code>App\Http\Controllers</code> å‘½åç©ºé—´ã€‚åœ¨ Laravel ä¸­ï¼Œæ§åˆ¶å™¨éƒ½ä½äºè¿™ä¸ªå‘½åç©ºé—´ä¸‹ï¼Œç¬¦åˆ PSR-4 è‡ªåŠ¨åŠ è½½è§„èŒƒã€‚</p>

<hr />

<div class="codehilite">
<pre><span></span><code><span class="x">use Illuminate\Foundation\Auth\Access\AuthorizesRequests;</span>
<span class="x">use Illuminate\Foundation\Bus\DispatchesJobs;</span>
<span class="x">use Illuminate\Foundation\Validation\ValidatesRequests;</span>
<span class="x">use Illuminate\Routing\Controller as BaseController;</span>
</code></pre>
</div>

<p>è¿™å‡ è¡Œæ˜¯<strong>å¯¼å…¥ï¼ˆuseï¼‰Laravel æ¡†æ¶ä¸­çš„ä¸€äº›åŠŸèƒ½æ¨¡å—</strong>ï¼š</p>

<table>
<thead>
<tr>
  <th>å¯¼å…¥æ¨¡å—</th>
  <th>åŠŸèƒ½æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>AuthorizesRequests</code></td>
  <td>æä¾›æˆæƒï¼ˆæƒé™ï¼‰å¤„ç†çš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>$this-&gt;authorize()</code>ï¼Œç”¨äºæ§åˆ¶ç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡ŒæŸäº›æ“ä½œ</td>
</tr>
<tr>
  <td><code>DispatchesJobs</code></td>
  <td>å…è®¸ä½ è°ƒåº¦ Laravel çš„å¼‚æ­¥ä»»åŠ¡æˆ–é˜Ÿåˆ—ï¼ˆJobsï¼‰ï¼Œå¦‚ï¼š<code>dispatch(new JobName)</code></td>
</tr>
<tr>
  <td><code>ValidatesRequests</code></td>
  <td>æä¾›è¯·æ±‚éªŒè¯çš„æ–¹æ³•ï¼Œæ¯”å¦‚ <code>$this-&gt;validate($request, [...])</code></td>
</tr>
<tr>
  <td><code>Controller as BaseController</code></td>
  <td>å¼•å…¥ Laravel æ¡†æ¶çš„åŸºç¡€æ§åˆ¶å™¨ç±»ï¼Œå¹¶å°†å…¶é‡å‘½åä¸º <code>BaseController</code>ï¼Œä»¥é¿å…å‘½åå†²çª</td>
</tr>
</tbody>
</table>

<hr />

<div class="codehilite">
<pre><span></span><code><span class="x">class Controller extends BaseController</span>
</code></pre>
</div>

<p>å®šä¹‰ä¸€ä¸ªåä¸º <code>Controller</code> çš„ç±»ï¼Œå¹¶<strong>ç»§æ‰¿</strong>è‡ª <code>BaseController</code>ï¼ˆLaravel æ¡†æ¶çš„æ ¸å¿ƒæ§åˆ¶å™¨ï¼‰ã€‚</p>

<p>è¿™ä¸ªç±»æ˜¯æ•´ä¸ªåº”ç”¨ä¸­æ‰€æœ‰æ§åˆ¶å™¨çš„<strong>åŸºç±»</strong>ï¼Œæ„å‘³ç€å…¶ä»–æ§åˆ¶å™¨ï¼ˆå¦‚ <code>HomeController</code>, <code>UserController</code>ï¼‰é€šå¸¸ä¼š <code>extends Controller</code> æ¥ç»§æ‰¿è¿™äº›åŸºç¡€åŠŸèƒ½ã€‚</p>

<hr />

<div class="codehilite">
<pre><span></span><code><span class="x">{</span>
<span class="x">    use AuthorizesRequests, DispatchesJobs, ValidatesRequests;</span>
<span class="x">}</span>
</code></pre>
</div>

<p>è¿™é‡Œä½¿ç”¨ PHP çš„ <code>trait</code> ç‰¹æ€§ï¼ˆç›¸å½“äºæ¨¡å—å¼•å…¥ï¼‰ï¼Œå¼•å…¥äº†ä¸Šé¢å¯¼å…¥çš„ä¸‰ä¸ªåŠŸèƒ½æ¨¡å—ï¼š</p>

<table>
<thead>
<tr>
  <th>trait åç§°</th>
  <th>åŠŸèƒ½ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>AuthorizesRequests</code></td>
  <td>å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨ <code>$this-&gt;authorize('update', $post)</code> æ¥æ£€æŸ¥ç”¨æˆ·æƒé™</td>
</tr>
<tr>
  <td><code>DispatchesJobs</code></td>
  <td>å…è®¸æ§åˆ¶å™¨ä¸­æ´¾å‘ä»»åŠ¡åˆ°é˜Ÿåˆ—ï¼Œä¾‹å¦‚ <code>dispatch(new SendEmailJob($user))</code></td>
</tr>
<tr>
  <td><code>ValidatesRequests</code></td>
  <td>æä¾›è¯·æ±‚éªŒè¯çš„ç®€æ´å†™æ³• <code>$this-&gt;validate($request, ['name' =&gt; 'required'])</code></td>
</tr>
</tbody>
</table>

<hr />

<h3>ğŸ“Œ æ€»ç»“</h3>

<p>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š</p>

<ul>
<li>å®šä¹‰ä¸€ä¸ª Laravel ä¸­æ‰€æœ‰æ§åˆ¶å™¨çš„<strong>åŸºç±» Controller</strong></li>
<li>å®ƒç»§æ‰¿äº† Laravel æ¡†æ¶çš„æ ¸å¿ƒæ§åˆ¶å™¨ç±»</li>
<li>ä½¿ç”¨äº† 3 ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ traitï¼ˆæˆæƒã€ä»»åŠ¡è°ƒåº¦ã€è¯·æ±‚éªŒè¯ï¼‰</li>
</ul>

<p>å…¶ä»–æ§åˆ¶å™¨åªè¦ç»§æ‰¿å®ƒï¼Œå°±è‡ªåŠ¨å…·å¤‡è¿™ä¸‰ä¸ªåŠŸèƒ½ï¼Œéå¸¸æ–¹ä¾¿å¼€å‘ã€‚</p>

<hr />

<h3>âœ… ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœä½ å†™ä¸€ä¸ªæ§åˆ¶å™¨</h3>

<div class="codehilite">
<pre><span></span><code><span class="x">class PostController extends Controller</span>
<span class="x">{</span>
<span class="x">    public function store(Request $request)</span>
<span class="x">    {</span>
<span class="x">        $this-&gt;validate($request, [&#39;title&#39; =&gt; &#39;required&#39;]); // ä½¿ç”¨ ValidatesRequests ä¸­çš„åŠŸèƒ½</span>
<span class="x">        $this-&gt;authorize(&#39;create&#39;, Post::class); // ä½¿ç”¨ AuthorizesRequests</span>
<span class="x">        dispatch(new NotifyAdminJob($request-&gt;user())); // ä½¿ç”¨ DispatchesJobs</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre>
</div>

<p>ä¸Šé¢çš„æ§åˆ¶å™¨å°±å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ç±»æä¾›çš„éªŒè¯ã€æˆæƒå’Œä»»åŠ¡è°ƒåº¦åŠŸèƒ½ï¼Œå¾—ç›Šäº <code>Controller</code> ç±»ä¸­çš„ <code>trait</code>ã€‚</p>

<hr />

<p>å¦‚ä½ éœ€è¦æˆ‘å±•å¼€è§£é‡ŠæŸä¸ª <code>trait</code> çš„æºç ã€ç¤ºä¾‹ç”¨æ³•ï¼Œæˆ–è€…å¦‚ä½•é‡å†™è¿™ä¸ªåŸºç±»ï¼Œä¹Ÿå¯ä»¥ç»§ç»­å‘Šè¯‰æˆ‘ã€‚</p>
</body>
            </html>
            